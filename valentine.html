<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Be My Valentine ‚ù§Ô∏è</title>
  <style>
    :root{
      --bg1:#ff2d55;
      --bg2:#b00020;
      --card:#ffffffee;
      --text:#1a1a1a;
      --shadow: 0 18px 60px rgba(0,0,0,.25);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      color:var(--text);
      overflow:hidden;
      background:
        radial-gradient(1200px 700px at 20% 15%, #ff8aa6 0%, transparent 55%),
        radial-gradient(900px 650px at 90% 10%, #ff4f73 0%, transparent 60%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
    }
    .pattern{
      position:fixed; inset:0;
      background-image:
        radial-gradient(circle at 10px 10px, rgba(255,255,255,.18) 2px, transparent 3px),
        radial-gradient(circle at 35px 30px, rgba(255,255,255,.12) 2px, transparent 3px);
      background-size: 50px 50px;
      opacity:.45;
      pointer-events:none;
    }

    .hearts{ position:fixed; inset:0; pointer-events:none; overflow:hidden; }
    .heart{
      position:absolute; width:18px; height:18px;
      transform: rotate(45deg);
      opacity:0;
      animation: floatUp linear forwards;
      background: rgba(255,255,255,.85);
    }
    .heart:before,.heart:after{
      content:""; position:absolute; width:18px; height:18px; border-radius:50%;
      background: rgba(255,255,255,.85);
    }
    .heart:before{ left:-9px; top:0; }
    .heart:after{ left:0; top:-9px; }
    @keyframes floatUp{
      0%{ transform: translateY(40px) rotate(45deg) scale(.9); opacity:0; }
      10%{ opacity:.95; }
      100%{ transform: translateY(-110vh) rotate(45deg) scale(1.35); opacity:0; }
    }

    .wrap{ height:100%; display:grid; place-items:center; padding:24px; }
    .card{
      width:min(760px, 100%);
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.6);
      padding:34px 34px 28px;
    }
    .badge{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 14px; border-radius:999px;
      background: rgba(255,45,85,.12);
      color:#8b0018; font-weight:650; width:fit-content;
    }
    .badge .dot{
      width:10px; height:10px; border-radius:50%;
      background:#ff2d55; box-shadow:0 0 0 6px rgba(255,45,85,.12);
    }
    h1{ margin:18px 0 10px; font-size:clamp(28px,4vw,44px); line-height:1.05; letter-spacing:-0.02em; }
    p{ margin:0; font-size:16.5px; line-height:1.55; opacity:.9; }

    .btnRow{
      display:flex; gap:12px; flex-wrap:wrap; align-items:center;
      margin-top:18px; position:relative; min-height:56px;
    }
    button{
      border:0; border-radius:14px; padding:14px 18px;
      font-weight:800; cursor:pointer; font-size:16px;
      transition: transform .12s ease, box-shadow .12s ease;
      user-select:none; display:inline-flex; align-items:center; gap:10px;
    }
    .yes{
      background: linear-gradient(180deg, #ff2d55, #d9003c);
      color:#fff; box-shadow: 0 10px 24px rgba(217,0,60,.28);
    }
    .yes:hover{ transform: translateY(-1px); box-shadow: 0 14px 30px rgba(217,0,60,.33); }
    .no{
      background: rgba(20,20,20,.08);
      color:#1a1a1a; box-shadow: 0 8px 18px rgba(0,0,0,.08);
      position:relative;
    }

    .mini{ margin-top:18px; font-size:13.5px; opacity:.75; }

    /* Overlay */
    .overlay{
      position:fixed; inset:0; display:none; place-items:center;
      background: rgba(0,0,0,.35);
      backdrop-filter: blur(6px);
      padding:22px; z-index:50;
    }
    .overlay.show{ display:grid; }
    .modal{
      width:min(720px, 100%);
      background: rgba(255,255,255,.95);
      border-radius: 26px;
      box-shadow: var(--shadow);
      padding:28px;
      border: 1px solid rgba(255,255,255,.7);
      text-align:center;
    }
    .bigHeart{
      width:86px; height:86px; margin:0 auto 12px;
      position:relative; transform: rotate(45deg);
      background: linear-gradient(180deg, #ff2d55, #c70038);
      border-radius:16px; box-shadow: 0 18px 40px rgba(199,0,56,.32);
    }
    .bigHeart:before,.bigHeart:after{
      content:""; position:absolute; width:86px; height:86px; border-radius:50%;
      background: linear-gradient(180deg, #ff2d55, #c70038);
    }
    .bigHeart:before{ left:-43px; top:0; }
    .bigHeart:after{ left:0; top:-43px; }

    .modalPhoto{
      width:min(340px, 78vw);
      margin: 8px auto 10px;
      border-radius: 22px;
      overflow:hidden;
      border: 6px solid rgba(255,255,255,.75);
      box-shadow: 0 18px 50px rgba(0,0,0,.22);
      display:none; /* shown only after YES loads image */
    }
    .modalPhoto img{ width:100%; height:auto; display:block; object-fit:cover; }

    .modal h2{ margin:10px 0 10px; font-size:clamp(22px,3vw,34px); letter-spacing:-0.02em; }
    .sig{ margin-top:12px; font-weight:800; color:#8b0018; opacity:.9; }

    .actions{ margin-top:18px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap; }
    .close{ background: rgba(20,20,20,.08); }
    .cta{
      background: linear-gradient(180deg, #ff6b8b, #ff2d55);
      color:#fff; box-shadow: 0 10px 24px rgba(255,45,85,.22);
    }
  </style>
</head>

<body>
  <div class="pattern"></div>
  <div class="hearts" id="hearts"></div>

  <main class="wrap">
    <section class="card" aria-label="Valentine card">
      <div class="badge"><span class="dot"></span> Valentine‚Äôs Surprise</div>

      <h1>Would you be my valentine? ‚ù§Ô∏è</h1>
      <p>
        I made a tiny corner of the internet just for you.
        One question‚Ä¶ two buttons‚Ä¶ and a whole lot of love.
      </p>

      <div class="btnRow" id="btnRow">
        <button class="yes" id="yesBtn" type="button">Yes üíñ</button>
        <button class="no" id="noBtn" type="button">No üôà</button>
      </div>

      <div class="mini">Tip: Works best on phone too ‚Äî just open the link in a browser.</div>
    </section>
  </main>

  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Valentine result">
      <div class="bigHeart" aria-hidden="true"></div>

      <div class="modalPhoto" id="modalPhoto">
        <img id="ourPhoto" alt="Our picture" />
      </div>

      <h2>You said YES! üíò</h2>
      <p>
        You‚Äôre my favorite person, my safe place, and my best adventure.
        Thank you for being you ‚Äî today and always.
      </p>
      <div class="sig">‚Äî Love you endlessly ‚ù§Ô∏è</div>

      <div class="actions">
        <button class="cta" id="moreHearts" type="button">More hearts ‚ú®</button>
        <button class="close" id="closeOverlay" type="button">Close</button>
      </div>
    </div>
  </div>

  <script>
  (function () {
    function $(id) { return document.getElementById(id); }

    const overlay = $("overlay");
    const yesBtn = $("yesBtn");
    const noBtn = $("noBtn");
    const btnRow = $("btnRow");
    const closeOverlay = $("closeOverlay");
    const moreHearts = $("moreHearts");

    const heartsEl = $("hearts");
    const modalPhoto = $("modalPhoto");
    const ourPhoto = $("ourPhoto");

    function spawnHeartBurst(count = 22) {
      if (!heartsEl) return;
      const w = window.innerWidth;
      for (let i = 0; i < count; i++) {
        const h = document.createElement("div");
        h.className = "heart";
        const size = 10 + Math.random() * 18;
        h.style.width = size + "px";
        h.style.height = size + "px";
        h.style.left = (Math.random() * w) + "px";
        h.style.bottom = (-30 - Math.random() * 60) + "px";
        h.style.animationDuration = (2.8 + Math.random() * 2.4) + "s";
        h.style.filter = `blur(${Math.random() * 0.6}px)`;
        heartsEl.appendChild(h);
        setTimeout(() => h.remove(), 4000);
      }
    }

    let gentleTimer = null;
    function startGentleHearts() {
      if (gentleTimer) return;
      gentleTimer = setInterval(() => spawnHeartBurst(5), 900);
    }
    function stopGentleHearts() {
      if (!gentleTimer) return;
      clearInterval(gentleTimer);
      gentleTimer = null;
    }

    function showOverlay() {
      if (!overlay) return;
      overlay.classList.add("show");
      overlay.setAttribute("aria-hidden", "false");
    }

    function hideOverlay() {
      if (!overlay) return;
      overlay.classList.remove("show");
      overlay.setAttribute("aria-hidden", "true");
      stopGentleHearts();
    }

    // No-button dodge (optional)
    function moveNoButton() {
      if (!btnRow || !noBtn) return;
      const rect = btnRow.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();
      const maxX = rect.width - btnRect.width;
      const maxY = 70;
      const x = Math.max(0, Math.min(maxX, Math.random() * maxX));
      const y = Math.max(-10, Math.min(maxY, (Math.random() * maxY) - 8));
      noBtn.style.position = "absolute";
      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";
    }

    // Attach handlers safely
    if (noBtn) {
      noBtn.addEventListener("mouseenter", moveNoButton);
      noBtn.addEventListener("touchstart", moveNoButton, { passive: true });
      noBtn.addEventListener("click", () => { spawnHeartBurst(10); moveNoButton(); });
    }

    if (yesBtn) {
      yesBtn.addEventListener("click", () => {
        // 1) Show overlay immediately
        showOverlay();
        spawnHeartBurst(40);
        startGentleHearts();

        // 2) Load photo from GitHub repo
        // Ensure this works:
        // https://shekabhisharma.github.io/valentine-link/picture.jpeg
        if (ourPhoto) {
          ourPhoto.src = "./picture.jpeg";   // <-- UPDATED NAME
          ourPhoto.onload = () => { if (modalPhoto) modalPhoto.style.display = "block"; };
          ourPhoto.onerror = () => {
            if (modalPhoto) modalPhoto.style.display = "none";
            console.warn("Image failed to load. Check filename/path: picture.jpeg");
          };
        }
      });
    }

    if (closeOverlay) closeOverlay.addEventListener("click", hideOverlay);
    if (moreHearts) moreHearts.addEventListener("click", () => spawnHeartBurst(60));

    setTimeout(() => spawnHeartBurst(18), 350);
  })();
</script>
